<app-navbar [mostrarBusqueda]="true" (buscarEvent)="buscar($event)"></app-navbar>

<!-- Contenido principal -->
<div class="container mt-4" style="background-color: var(--cinema-bg); min-height: 100vh; padding-bottom: 2rem;">

  

  <h2 class="mb-4 text-center">üé¨ Cartelera de Pel√≠culas</h2>

  <!-- Loader -->
  <div *ngIf="loading" class="text-center">
    <div class="spinner-border text-primary" role="status"></div>
    <p>Cargando cartelera...</p>
  </div>

  <!-- Grid de pel√≠culas -->
  <div class="row" *ngIf="!loading && peliculas?.length">
    <div class="col-md-4 mb-4" *ngFor="let peli of peliculas || []">
      <div class="card h-100 shadow-lg movie-card">
        <img [src]="peli?.Poster" class="card-img-top movie-img" alt="Imagen de {{peli?.Title}}" *ngIf="peli?.Poster">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">{{ peli?.Title || 'Sin t√≠tulo' }}</h5>
          <p class="card-text"><strong>A√±o:</strong> {{ peli?.Year || 'N/A' }}</p>
          <p class="card-text"><strong>G√©nero:</strong> {{ peli?.Type || 'N/A' }}</p>
          <p class="card-text"><strong>Cine:</strong> {{ peli?.Ubication || 'N/A' }}</p>
          
          <!-- Descripci√≥n limitada -->
          <p class="card-text">
            {{ peli?.description ? (peli.description | slice:0:100) : 'Sin descripci√≥n' }}
            {{ (peli?.description?.length ?? 0) > 100 ? '...' : '' }}
          </p>

          <div class="d-flex justify-content-between align-items-center mt-auto">
            <span class="badge" [ngClass]="peli?.Estado ? 'badge-available' : 'badge-unavailable'">
              {{ peli?.Estado ? 'Disponible' : 'No Disponible' }}
            </span>
            <button class="btn btn-sm btn-cinema" [routerLink]="['/detalle', peli?.imdbID || '']" (click)="verDetalle(peli?.imdbID || '')">
              Ver Detalles
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="!loading && (!peliculas || peliculas.length === 0)" class="text-center">
    <p>No se encontraron pel√≠culas con esos filtros.</p>
  </div>
</div>

<app-footer></app-footer>
